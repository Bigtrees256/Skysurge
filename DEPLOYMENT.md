# SkySurge Deployment Guide

## Deploying to Render

### Prerequisites
1. GitHub account
2. Render account (free at render.com)
3. Stripe account with API keys
4. Google Cloud Console project with OAuth credentials

### Step 1: Push to GitHub
1. Create a new repository on GitHub
2. Push your code:
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/skysurge.git
   git push -u origin main
   ```

### Step 2: Deploy on Render
1. Go to [render.com](https://render.com) and sign up/login
2. Click "New +" → "Blueprint"
3. Connect your GitHub repository
4. Render will automatically detect the `render.yaml` configuration
5. Click "Apply" to deploy

### Step 3: Configure Environment Variables
In your Render dashboard, go to your service and add these environment variables:

#### Required Variables:
- `JWT_SECRET` - (Auto-generated by Render)
- `MONGODB_URI` - (Auto-configured by Render)

#### Manual Configuration:
- `GOOGLE_CLIENT_ID` - Your Google OAuth client ID
- `GOOGLE_CLIENT_SECRET` - Your Google OAuth client secret
- `STRIPE_SECRET_KEY` - Your Stripe secret key (starts with `sk_test_` or `sk_live_`)
- `STRIPE_WEBHOOK_SECRET` - Your Stripe webhook secret

### Step 4: Configure Google OAuth
1. Go to [Google Cloud Console](https://console.cloud.google.com)
2. Navigate to "APIs & Services" → "Credentials"
3. Edit your OAuth 2.0 Client ID
4. Add these Authorized redirect URIs:
   - `https://skysurge-backend.onrender.com/auth/google/callback`
   - `https://skysurge.onrender.com/auth/google/callback`

### Step 5: Configure Stripe Webhooks (Optional)
1. Go to [Stripe Dashboard](https://dashboard.stripe.com)
2. Navigate to "Developers" → "Webhooks"
3. Add endpoint: `https://skysurge-backend.onrender.com/api/payments/webhook`
4. Select events: `payment_intent.succeeded`, `payment_intent.payment_failed`
5. Copy the webhook secret and add it to Render environment variables

### Step 6: Test Your Deployment
1. Visit your deployed URL (e.g., `https://skysurge-backend.onrender.com`)
2. Test user registration/login
3. Test Google OAuth
4. Test the game
5. Test Stripe payments with test cards:
   - Success: `4242 4242 4242 4242`
   - Decline: `4000 0000 0000 0002`

### Troubleshooting
- Check Render logs for any errors
- Verify all environment variables are set correctly
- Ensure Google OAuth redirect URIs match your deployed URL
- Test with Stripe test keys before going live

### Going Live
1. Replace Stripe test keys with live keys
2. Update Google OAuth to production settings
3. Test thoroughly with real payments
4. Monitor your application logs and Stripe dashboard 